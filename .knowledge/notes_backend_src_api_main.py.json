{"is_source_file": true, "format": "Python", "description": "This file implements a RESTful API for a notes application using FastAPI, using SQLite for storage. It includes data models for notes, functions for database interaction, and route handlers for CRUD operations.", "external_files": ["sqlite3", "fastapi", "fastapi.middleware.cors", "pydantic", "os", "datetime"], "external_methods": ["os.getenv", "sqlite3.connect", "datetime.utcnow", "datetime.fromisoformat"], "published": ["app", "health_check", "list_notes", "get_note", "create_note", "update_note", "delete_note"], "classes": [{"name": "Note", "description": "A note resource with fields for id, title, content, created_at, and updated_at."}, {"name": "NoteCreate", "description": "Payload schema for creating a new note, requiring title and content."}, {"name": "NoteUpdate", "description": "Payload schema for updating a note; fields are optional for partial updates."}], "methods": [{"name": "list[str] _parse_allowed_origins(raw: str)", "description": "Parses a raw string of allowed origins into a list.", "scope": "", "scopeKind": ""}, {"name": "str _get_db_path()", "description": "Resolves the database file path, allowing override via environment variable.", "scope": "", "scopeKind": ""}, {"name": "sqlite3.Connection _get_conn()", "description": "Creates and returns a SQLite3 connection with row_factory set for dict-like access.", "scope": "", "scopeKind": ""}, {"name": "None _init_db()", "description": "Initializes the database schema if not already present.", "scope": "", "scopeKind": ""}, {"name": "Note _row_to_note(row: sqlite3.Row)", "description": "Converts a sqlite3.Row into a Note model instance.", "scope": "", "scopeKind": ""}, {"name": "None _on_startup()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Note create_note(payload: NoteCreate)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Response delete_note(note_id: int)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Note get_note(note_id: int)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "dict health_check()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "List[Note] list_notes()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Note update_note(note_id: int, payload: NoteUpdate)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["_parse_allowed_origins", "_get_db_path", "_get_conn", "_init_db", "_row_to_note", "os.getenv", "sqlite3.connect", "datetime.utcnow", "datetime.fromisoformat"], "search-terms": ["FastAPI notes API", "SQLite CRUD notes", "Python REST API", "Note data models", "Database initialization", "CORS middleware", "Health check endpoint", "Create read update delete notes"], "state": 2, "file_id": 2, "knowledge_revision": 12, "git_revision": "0d7ee7425956162146c2643cf8bb52a662e5de3c", "revision_history": [{"9": "86af23efcb7a7b3c246fc0dd130743d98b2105a0"}, {"10": "86af23efcb7a7b3c246fc0dd130743d98b2105a0"}, {"11": "0d7ee7425956162146c2643cf8bb52a662e5de3c"}, {"12": "0d7ee7425956162146c2643cf8bb52a662e5de3c"}], "ctags": [{"_type": "tag", "name": "Note", "path": "/home/kavia/workspace/code-generation/simple-notes-application-304322-304331/notes_backend/src/api/main.py", "pattern": "/^class Note(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NoteCreate", "path": "/home/kavia/workspace/code-generation/simple-notes-application-304322-304331/notes_backend/src/api/main.py", "pattern": "/^class NoteCreate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NoteUpdate", "path": "/home/kavia/workspace/code-generation/simple-notes-application-304322-304331/notes_backend/src/api/main.py", "pattern": "/^class NoteUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_get_conn", "path": "/home/kavia/workspace/code-generation/simple-notes-application-304322-304331/notes_backend/src/api/main.py", "pattern": "/^def _get_conn() -> sqlite3.Connection:$/", "language": "Python", "typeref": "typename:sqlite3.Connection", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_get_db_path", "path": "/home/kavia/workspace/code-generation/simple-notes-application-304322-304331/notes_backend/src/api/main.py", "pattern": "/^def _get_db_path() -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_init_db", "path": "/home/kavia/workspace/code-generation/simple-notes-application-304322-304331/notes_backend/src/api/main.py", "pattern": "/^def _init_db() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_on_startup", "path": "/home/kavia/workspace/code-generation/simple-notes-application-304322-304331/notes_backend/src/api/main.py", "pattern": "/^def _on_startup() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_parse_allowed_origins", "path": "/home/kavia/workspace/code-generation/simple-notes-application-304322-304331/notes_backend/src/api/main.py", "pattern": "/^def _parse_allowed_origins(raw: str) -> list[str]:$/", "language": "Python", "typeref": "typename:list[str]", "kind": "function", "signature": "(raw: str)"}, {"_type": "tag", "name": "_row_to_note", "path": "/home/kavia/workspace/code-generation/simple-notes-application-304322-304331/notes_backend/src/api/main.py", "pattern": "/^def _row_to_note(row: sqlite3.Row) -> Note:$/", "language": "Python", "typeref": "typename:Note", "kind": "function", "signature": "(row: sqlite3.Row)"}, {"_type": "tag", "name": "allow_headers", "path": "/home/kavia/workspace/code-generation/simple-notes-application-304322-304331/notes_backend/src/api/main.py", "pattern": "/^allow_headers = ($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "allow_methods", "path": "/home/kavia/workspace/code-generation/simple-notes-application-304322-304331/notes_backend/src/api/main.py", "pattern": "/^allow_methods = ($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "allowed_origins", "path": "/home/kavia/workspace/code-generation/simple-notes-application-304322-304331/notes_backend/src/api/main.py", "pattern": "/^allowed_origins = sorted($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/simple-notes-application-304322-304331/notes_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/simple-notes-application-304322-304331/notes_backend/src/api/main.py", "pattern": "/^    content: Optional[str] = Field(None, description=\"Updated note content\\/body.\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "NoteUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/simple-notes-application-304322-304331/notes_backend/src/api/main.py", "pattern": "/^    content: str = Field(..., description=\"Note content\\/body.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/simple-notes-application-304322-304331/notes_backend/src/api/main.py", "pattern": "/^    content: str = Field(..., description=\"Note content\\/body.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteCreate", "scopeKind": "class"}, {"_type": "tag", "name": "create_note", "path": "/home/kavia/workspace/code-generation/simple-notes-application-304322-304331/notes_backend/src/api/main.py", "pattern": "/^def create_note(payload: NoteCreate) -> Note:$/", "language": "Python", "typeref": "typename:Note", "kind": "function", "signature": "(payload: NoteCreate)"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/simple-notes-application-304322-304331/notes_backend/src/api/main.py", "pattern": "/^    created_at: datetime = Field(..., description=\"Creation timestamp (UTC).\")$/", "language": "Python", "typeref": "typename:datetime", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "delete_note", "path": "/home/kavia/workspace/code-generation/simple-notes-application-304322-304331/notes_backend/src/api/main.py", "pattern": "/^def delete_note(note_id: int) -> Response:$/", "language": "Python", "typeref": "typename:Response", "kind": "function", "signature": "(note_id: int)"}, {"_type": "tag", "name": "get_note", "path": "/home/kavia/workspace/code-generation/simple-notes-application-304322-304331/notes_backend/src/api/main.py", "pattern": "/^def get_note(note_id: int) -> Note:$/", "language": "Python", "typeref": "typename:Note", "kind": "function", "signature": "(note_id: int)"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/simple-notes-application-304322-304331/notes_backend/src/api/main.py", "pattern": "/^def health_check() -> dict:$/", "language": "Python", "typeref": "typename:dict", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/simple-notes-application-304322-304331/notes_backend/src/api/main.py", "pattern": "/^    id: int = Field(..., description=\"Unique note identifier.\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "list_notes", "path": "/home/kavia/workspace/code-generation/simple-notes-application-304322-304331/notes_backend/src/api/main.py", "pattern": "/^def list_notes() -> List[Note]:$/", "language": "Python", "typeref": "typename:List[Note]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "openapi_tags", "path": "/home/kavia/workspace/code-generation/simple-notes-application-304322-304331/notes_backend/src/api/main.py", "pattern": "/^openapi_tags = [$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-application-304322-304331/notes_backend/src/api/main.py", "pattern": "/^    title: Optional[str] = Field(None, min_length=1, max_length=200, description=\"Updated note t/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "NoteUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-application-304322-304331/notes_backend/src/api/main.py", "pattern": "/^    title: str = Field(..., description=\"Note title.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-application-304322-304331/notes_backend/src/api/main.py", "pattern": "/^    title: str = Field(..., min_length=1, max_length=200, description=\"Note title.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteCreate", "scopeKind": "class"}, {"_type": "tag", "name": "update_note", "path": "/home/kavia/workspace/code-generation/simple-notes-application-304322-304331/notes_backend/src/api/main.py", "pattern": "/^def update_note(note_id: int, payload: NoteUpdate) -> Note:$/", "language": "Python", "typeref": "typename:Note", "kind": "function", "signature": "(note_id: int, payload: NoteUpdate)"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/simple-notes-application-304322-304331/notes_backend/src/api/main.py", "pattern": "/^    updated_at: datetime = Field(..., description=\"Last update timestamp (UTC).\")$/", "language": "Python", "typeref": "typename:datetime", "kind": "variable", "scope": "Note", "scopeKind": "class"}], "hash": "81678c214472c9db966b390260ecdddf", "format-version": 4, "code-base-name": "notes_backend", "filename": "notes_backend/src/api/main.py", "fields": [{"name": "allow_headers = (", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "allow_methods = (", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "allowed_origins = sorted(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[str] content", "scope": "NoteUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "str content", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "datetime created_at", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "int id", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "openapi_tags = [", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[str] title", "scope": "NoteUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "str title", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "datetime updated_at", "scope": "Note", "scopeKind": "class", "description": "unavailable"}]}